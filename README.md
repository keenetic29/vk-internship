# VK-Internship: REST API условного маркетплейса

## О проекте

- **Язык**: Go 1.23
- **Фреймворк**: Gin + GORM
- **База данных**: PostgreSQL
- **Аутентификация**: JWT
- **Контейнеризация**: Docker
- **Логирование**: Slog

### Ключевые функции:

- Система аутентификации пользователей:
    - Регистрация новых пользователей

    - Авторизация с выдачей JWT-токена

- Управление объявлениями:

    - Создание объявлений (для авторизованных пользователей)

- Получение списка объявлений с возможностью:
    - Фильтрации по различным параметрам

    - Сортировки по заданным критериям

    - Отображение информации о владельце объявления

## Реализация
### Структура проекта
```
├── cmd/            # Точка входа
├── internal/       # Внутренние пакеты
│   ├── api/        # HTTP handlers
│   ├── config/     # Конфигурация
│   ├── domain/     # Модели данных
│   ├── repository/ # Работа с БД
│   └── services/   # Бизнес-логика
├── pkg/            # Вспомогательные пакеты
│   ├── database/   # Инициализация БД
│   ├── jwt/        # JWT утилиты
│   ├── logger/     # Логирование
│   └── password/   # Логика работы с паролями (хэширование)
├── .env            # Переменные окружения
├── docker-compose.yml
└── Dockerfile
```
Применен подход чистой архитектуры, по которой проект разделен на три основных слоя:

- Транспортный слой (представлен в папке `api`)
- Слой сервисов (представлен в папке `services`)
- Слой репозиториев (представлен в папке `repository`)

Общение между слоями реализовано через интерфейсы. Интерфейсы описаны в месте их использования ("на стороне потребителя").

На транспортном слое использую фреймворк GIN.

В качестве базы данных использую PostgreSQL и фреймворк GORM для удобного взаимодействия с БД.

### Ручки
Здесь описаны все эндпоинты и отправляемые json тела запросов к ним со всеми параметрами и их типами данных.
### Аутентификация:
`POST /auth/register` - Регистрация пользователя

Параметры запроса:
```json
{
  "username": "string",
  "password": "string"
}
```
`POST /auth/login` - Вход в систему (получение JWT)

Параметры запроса:
```json
{
  "username": "string",
  "password": "string"
}
```

### Объявления:
`GET  /ads` - Получить список объявлений
```json
// Примечание: в заголовок необходимо вставить токен, полученный при входе в систему в случае, если хотите увидеть, являетесь ли Вы владельцем объявления.
Authorization: <ваш_токен>
```
Параметры запроса: отсутствуют.

`POST /ads` - Создать новое объявление
```json
// Примечание: в заголовок необходимо вставить токен, полученный при входе в систему
Authorization: <ваш_токен>
```

Параметры запроса:
```json
{
  "title": "string",
  "description": "string",
  "image_url": "string",
  "cost": "number (float)" 
}
```

## Сборка проекта
Для корректной работы проекта необходимо создать файл `.env` в корне проекта, в котором будут описаны параметры для запуска. 
Пример:
```
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=postgres
DB_NAME=marketplace
SERVER_ADDRESS=8080
LOG_DEBUG=true
LOG_FILE=logs
JWT_SECRET=secret_key
```
Для докер сборки измените значение DB_HOST на `db`.

Для создания и запуска работы контейнеров, пропишите в терминале следующую команду: `docker-compose up --build`